<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Pensiones</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<div class="container">
		<!-- Pensiones Section -->
		<div id="pensionesSection" class="section-content">
			<div class="section-header">
				<button class="btn-back" id="btnBackPensiones">â† Volver al MenÃº</button>
				<h1>ğŸ’° Pensiones</h1>
				<p class="subtitle">Compara el Excel quincenal con el Excel base y genera un archivo fusionado.</p>
			</div>

			<div class="upload-section">
			<div class="upload-box">
				<label for="fileQuincenal">ğŸ“„ Excel Quincenal</label>
				<input type="file" id="fileQuincenal" accept=".xlsx,.xls">
				<p class="file-name" id="fileQuincenalName">Sin archivo</p>
				<p class="hint">Columnas: PROYECTO, RFC, NOMBRE, BENEFICIARIO, FOLIO, IMPORTE, CVE, NOMINA, TOTAL DE DESCUENTOS, MODALIDAD</p>
			</div>

			<div class="upload-box">
				<label for="fileBasePensiones">ğŸ“‹ Excel Base</label>
				<input type="file" id="fileBasePensiones" accept=".xlsx,.xls">
				<p class="file-name" id="fileBasePensionesName">Sin archivo</p>
				<p class="hint">Columnas: No., NOMBRE, CUENTA, NE, BANCO</p>
			</div>
			</div>

			<button id="btnMergePensiones" class="btn-primary" disabled>ğŸ”€ Comparar y Fusionar</button>

			<div id="resultsPensiones" class="results hidden">
				<div class="summary">
					<div class="stat alta">
						<span class="stat-num" id="countAltasPensiones">0</span>
						<span class="stat-label">Altas</span>
					</div>
					<div class="stat baja">
						<span class="stat-num" id="countBajasPensiones">0</span>
						<span class="stat-label">Bajas</span>
					</div>
					<div class="stat total">
						<span class="stat-num" id="countTotalPensiones">0</span>
						<span class="stat-label">Total final</span>
					</div>
				</div>

				<div class="tabs">
					<button class="tab active" data-tab="altas">ğŸŸ¢ Altas</button>
					<button class="tab" data-tab="bajas">ğŸ”´ Bajas</button>
					<button class="tab" data-tab="final">ğŸ“Š Resultado Final</button>
				</div>

				<div class="tab-content" id="tabAltasPensiones">
					<table id="tableAltasPensiones">
						<thead><tr></tr></thead>
						<tbody></tbody>
					</table>
					<p class="empty-msg hidden">No hay altas en este periodo.</p>
				</div>

				<div class="tab-content hidden" id="tabBajasPensiones">
					<table id="tableBajasPensiones">
						<thead><tr></tr></thead>
						<tbody></tbody>
					</table>
					<p class="empty-msg hidden">No hay bajas en este periodo.</p>
				</div>

				<div class="tab-content hidden" id="tabFinalPensiones">
					<table id="tableFinalPensiones">
						<thead><tr></tr></thead>
						<tbody></tbody>
					</table>
				</div>

				<div class="action-buttons">
					<button id="btnDownloadPensiones" class="btn-success">â¬‡ï¸ Descargar Excel Fusionado</button>
					<button id="btnSplitPensiones" class="btn-secondary">ğŸ“‚ Separar por Modalidad/Banco</button>
				</div>
			</div>

			<!-- Split Results Section -->
			<div id="splitResultsPensiones" class="split-results hidden">
				<h2>ğŸ“ Archivos Generados</h2>
				<p class="split-description" id="splitDescriptionPensiones">Archivos separados por: Modalidad â†’ Banco</p>
				
				<div id="splitTreePensiones" class="split-tree"></div>
				<button id="btnDownloadAllPensiones" class="btn-success">â¬‡ï¸ Descargar Todos los Archivos</button>
				<button id="btnDownloadEfectivos" class="btn-secondary">ğŸ’µ Descargar Efectivos</button>
			</div>
		</div>
	</div>

	<!-- SheetJS from CDN -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
	<script src="utils.js"></script>
	<script src="pensiones.js"></script>
</body>
</html>

